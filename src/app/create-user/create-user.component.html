<div>
  <div class="border-2 w-fit mx-auto p-4 my-4">
    <form [formGroup]="userForm" class="w-96 mx-auto p-4">
      <div>
        <mat-form-field appearance="outline">
          <mat-label>User Name</mat-label>
          <input matInput formControlName="userName" />
          <mat-error *ngIf="userForm.get('userName')?.hasError('required')">
            User Name is required.
          </mat-error>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field appearance="outline">
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="phoneNumber" />
          <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('required')">
            Phone Number is required.
          </mat-error>
          <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('pattern')">
            Phone Number must be 10 digits.
          </mat-error>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field appearance="outline">
          <mat-label>Email ID</mat-label>
          <input matInput formControlName="emailId" />
          <mat-error *ngIf="userForm.get('emailId')?.hasError('required')">
            Email ID is required.
          </mat-error>
          <mat-error *ngIf="userForm.get('emailId')?.hasError('email')">
            Please enter a valid email address.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="flex space-x-2">
        <button
          type="button"
          class="rounded-md bg-blue-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"
          (click)="onSubmit()"
        >
          Save
        </button>

        <button
          type="button"
          class="rounded-md bg-red-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed"
          (click)="onCancel()"
        >
          Cancel
        </button>
      </div>

      <mat-spinner *ngIf="loading" diameter="30"></mat-spinner>
    </form>
  </div>

  <!-- User List Table -->
  <table mat-table [dataSource]="userList" class="mat-elevation-z8">
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>S.No</th>
        <td mat-cell *matCellDef="let user; let i = index">{{ i+1 }}</td>
      </ng-container>
    <ng-container matColumnDef="userName">
      <th mat-header-cell *matHeaderCellDef>User Name</th>
      <td mat-cell *matCellDef="let user">{{ user.userName }}</td>
    </ng-container>

    <ng-container matColumnDef="phoneNumber">
      <th mat-header-cell *matHeaderCellDef>Phone Number</th>
      <td mat-cell *matCellDef="let user">{{ user.phoneNumber }}</td>
    </ng-container>

    <ng-container matColumnDef="emailId">
      <th mat-header-cell *matHeaderCellDef>Email ID</th>
      <td mat-cell *matCellDef="let user">{{ user.emailId }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
